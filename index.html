<!DOCTYPE html>
<html>
	<head>
		<link rel="Stylesheet" href="app.css">
	</head>
	<body>
		<div class="app">
			<video id="player" class="camera-display" controls autoplay></video>
			<div class="action-bar">
				<button id="capture">Capture</button>
			</div>
		</div>

		<div id="captures" class="captures">
		</div>
		<script>  
			const player = document.getElementById('player');
			const captureButton = document.getElementById('capture');

			const handleSuccess = function(stream) {
				player.srcObject = stream;
			};

			navigator.mediaDevices.getUserMedia({video: true})
			  .then(handleSuccess);

			captureButton.addEventListener('click', function() {
				//const snapshotCanvas = document.getElementById('snapshot');
				const snapshotCanvas = document.createElement('canvas');

				snapshotCanvas.class = "capture";
				snapshotCanvas.width = 320;
				snapshotCanvas.height = 240;

				var context = snapshotCanvas.getContext('2d');

				// Draw the video frame to the canvas.
				context.drawImage(player, 0, 0, snapshotCanvas.width, snapshotCanvas.height);

				const captures = document.getElementById('captures');
				captures.append(snapshotCanvas);
			});
		</script>
	</body>
</html>